<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DART Simulation</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
  </head>
  <body>
    <header>
      <div class="header-row">
        <h1 data-i18n="header_title">DART Mission Simulation</h1>

        <div class="header-actions">
          <button
            id="fsBtn"
            class="icon-btn"
            type="button"
            aria-label="Toggle fullscreen"
            style="margin-right: 20px"
          >
            <img id="fsIcon" src="scripts/img/fullscreen-enter.png" alt="" />
          </button>

          <div class="lang-switcher">
            <label for="langSelect" data-i18n="language_label">Language</label>
            <select id="langSelect">
              <option value="en" data-i18n="language_en">English</option>
              <option value="el" data-i18n="language_el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
              <option value="es" data-i18n="language_es">Espa√±ol</option>
              <option value="fr" data-i18n="language_fr">Fran√ßais</option>
              <option value="de" data-i18n="language_de">Deutsch</option>
              <option value="pt-BR" data-i18n="language_ptBR">
                Portugu√™s (Brasil)
              </option>
              <option value="it" data-i18n="language_it">Italiano</option>
              <option value="ar" data-i18n="language_ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
              <option value="zh-CN" data-i18n="language_zhCN">‰∏≠Êñá</option>
              <option value="ja" data-i18n="language_ja">Êó•Êú¨Ë™û</option>
              <option value="ko" data-i18n="language_ko">ÌïúÍµ≠Ïñ¥</option>
            </select>
          </div>
        </div>
      </div>
    </header>

    <div class="wrap">
      <section class="panel controls">
        <h2 data-i18n="controls_title">Settings</h2>

        <!-- ŒúŒ¨Œ∂Œ± M (√ó10^11 kg) -->
        <div class="control">
          <label data-i18n="label_mass_M">Mass M (units: √ó10¬π¬π kg)</label>
          <div class="row">
            <input
              id="gmRange"
              type="range"
              min="1"
              max="10"
              step="0.1"
              value="5.4"
            />
            <input
              id="gmNum"
              type="number"
              min="1"
              max="10"
              step="0.1"
              value="5.4"
            />
          </div>
        </div>

        <!-- ŒúŒ¨Œ∂Œ± m (√ó10^9 kg) -->
        <div class="control">
          <label data-i18n="label_mass_m">Mass m (units: √ó10‚Åπ kg)</label>
          <div class="row">
            <input
              id="smallmRange"
              type="range"
              min="1"
              max="10"
              step="0.1"
              value="1.3"
            />
            <input
              id="smallmNum"
              type="number"
              min="1"
              max="10"
              step="0.1"
              value="1.3"
            />
          </div>
        </div>

        <!-- ŒëœÄœåœÉœÑŒ±œÉŒ∑ r0 (m) -->
        <div class="control">
          <label data-i18n="label_r0">Initial distance r‚ÇÄ (m)</label>
          <div class="row">
            <input
              id="r0Range"
              type="range"
              min="1000"
              max="3000"
              step="1"
              value="1190"
            />
            <input
              id="r0Num"
              type="number"
              min="1000"
              max="3000"
              step="1"
              value="1190"
            />
          </div>
        </div>

        <!-- Œ§Œ±œáœçœÑŒ∑œÑŒ± u (m/s) -->
        <div class="control">
          <label data-i18n="label_u0">Initial speed u (m/s)</label>
          <div class="row">
            <input
              id="uRange"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0.17403"
            />
            <input
              id="uNum"
              type="number"
              min="0"
              max="1"
              step="0.001"
              value="0.17403"
            />
          </div>
        </div>

        <div class="control">
          <label data-i18n="label_sim_speed">Simulation speed</label>
          <div class="row">
            <input
              id="speedRange"
              type="range"
              min="1"
              max="10000"
              step="1"
              value="1000"
            />
            <input
              id="speedNum"
              type="number"
              min="1"
              max="10000"
              step="1"
              value="1000"
            />
          </div>
        </div>
        <!-- ŒúŒ¨Œ∂Œ± Œ¥ŒπŒ±œÉœÑŒ∑ŒºŒøœÄŒªŒøŒØŒøœÖ m_D (kg) -->
        <div class="control">
          <label data-i18n="label_spacecraft_mass">
            Spacecraft mass m<sub>D</sub> (kg)
          </label>
          <div class="row">
            <input
              id="mDRange"
              type="range"
              min="100"
              max="10000"
              step="10"
              value="580"
            />
            <input
              id="mDNum"
              type="number"
              min="100"
              max="10000"
              step="10"
              value="580"
            />
          </div>
        </div>
        <!-- Œ§Œ±œáœçœÑŒ∑œÑŒ± Œ¥ŒπŒ±œÉœÑŒ∑ŒºŒøœÄŒªŒøŒØŒøœÖ u_D (m/s) -->
        <div class="control">
          <label data-i18n="label_spacecraft_speed">
            Spacecraft speed u<sub>D</sub> (m/s)
          </label>
          <div class="row">
            <input
              id="uDRange"
              type="range"
              min="500"
              max="10000"
              step="10"
              value="6150"
            />
            <input
              id="uDNum"
              type="number"
              min="500"
              max="10000"
              step="10"
              value="6150"
            />
          </div>
        </div>

        <div class="ctl">
          <div style="display: flex; gap: 10px; flex-wrap: wrap">
            <label>
              <input id="gridOn" type="checkbox" checked />
              <span data-i18n="opt_grid">Grid</span>
            </label>
            <label>
              <input id="showImages" type="checkbox" />
              <span data-i18n="opt_body_images">Body images</span>
            </label>
            <label>
              <input id="showVel" type="checkbox" />
              <span data-i18n="opt_show_velocity">Show velocity vector</span>
            </label>
            <label>
              <input id="showDistance" type="checkbox" />
              <span data-i18n="opt_show_distance">Distance M‚Äìm</span>
            </label>
            <label>
              <input id="showMeasure" type="checkbox" />
              <span data-i18n="opt_measure_tool">Measure</span>
            </label>
            <label>
              <input id="showForces" type="checkbox" />
              <span data-i18n="opt_show_forces">Gravitational forces</span>
            </label>
            <label>
              <input id="showPreview" type="checkbox" checked />
              <span data-i18n="opt_show_preview">Dashed orbit</span>
            </label>
            <label>
              <input id="showTrail" type="checkbox" checked />
              <span data-i18n="opt_show_trail">Orbit trail</span>
            </label>
            <label>
              <input id="showClosedGeom" type="checkbox" />
              <span data-i18n="opt_closed_orbit_geom">
                Orbit characteristics
              </span>
            </label>
          </div>
        </div>

        <div class="btns">
          <button id="playBtn" class="primary" data-i18n="btn_start">
            ‚ñ∂Ô∏è Start
          </button>
          <button id="pauseBtn" data-i18n="btn_pause">‚è∏Ô∏è Pause</button>
          <button id="resetBtn" data-i18n="btn_reset">üîÑ Reset</button>
          <button id="fitBtn" data-i18n="btn_fit">üó∫Ô∏è Auto-fit</button>
          <button id="clearBtn" data-i18n="btn_clear">üßπ Clear trail</button>
          <button id="impactBtn" class="danger" data-i18n="btn_impact">
            üöÄ Impact
          </button>
        </div>

        <div class="legend">
          <div>
            <span class="dot c-grid"></span>
            <span data-i18n="legend_grid">Grid</span>
          </div>
          <div>
            <span class="dot c-m"></span>
            <span data-i18n="legend_M">Central body M</span>
          </div>
          <div>
            <span class="dot c-mov"></span>
            <span data-i18n="legend_m">Body m</span>
          </div>
          <div>
            <span class="dot c-path"></span>
            <span data-i18n="legend_orbit">Orbit</span>
          </div>
        </div>
      </section>

      <section class="panel">
        <canvas id="cv"></canvas>
      </section>

      <section class="panel charts">
        <div class="status" id="statusBox">
          <div class="kv orbit-header">
            <span data-i18n="status_orbit_type">Orbit type:</span>
            <span id="orbitType" class="pill warn">‚Äî</span>
          </div>
          <div class="kv">
            <span data-i18n="status_time">Time t:</span>
            <span id="orbitTime">
              0<span class="unit-sup">h</span> 00<span class="unit-sup">m</span>
              00<span class="unit-sup">s</span>
            </span>
          </div>
          <div class="kv">
            <span data-i18n="status_u_circ">
              u<sub>circ</sub> = ‚àö(GM/r‚ÇÄ):
            </span>
            <span id="uCirc">‚Äî</span>
          </div>
          <div class="kv">
            <span data-i18n="status_u_esc"> u<sub>esc</sub> = ‚àö(2GM/r‚ÇÄ): </span>
            <span id="uEsc">‚Äî</span>
          </div>
          <div class="kv">
            <span data-i18n="status_energy"> Energy E = u¬≤/2 ‚àí GM/r: </span>
            <span id="energy">‚Äî</span>
          </div>
          <div class="kv">
            <span data-i18n="status_distance"> Distance M‚Äìm (r): </span>
            <span id="distRM">‚Äî</span>
          </div>
          <div class="kv">
            <span data-i18n="status_eccentricity"> Eccentricity e: </span>
            <span id="ecc">‚Äî</span>
          </div>
          <div class="kv">
            <span data-i18n="status_period">Period T:</span>
            <span id="periodFmt">‚Äî</span>
          </div>
        </div>

        <h2 data-i18n="charts_title">Charts</h2>

        <!-- ŒïœÄŒπŒªŒøŒ≥ŒÆ ŒøœÅŒ±œÑœåœÑŒ∑œÑŒ±œÇ Œ¥ŒπŒ±Œ≥œÅŒ±ŒºŒºŒ¨œÑœâŒΩ -->
        <div class="ctl">
          <div style="display: flex; gap: 10px; flex-wrap: wrap">
            <label>
              <input id="chartShowE" type="checkbox" checked />
              <span data-i18n="opt_chart_E">Total energy E(t)</span>
            </label>
            <label>
              <input id="chartShowK" type="checkbox" />
              <span data-i18n="opt_chart_K">Kinetic energy K(t)</span>
            </label>
            <label>
              <input id="chartShowU" type="checkbox" />
              <span data-i18n="opt_chart_U">Potential energy U(t)</span>
            </label>
            <label>
              <input id="chartShowR" type="checkbox" />
              <span data-i18n="opt_chart_r">Distance r(t)</span>
            </label>
            <label>
              <input id="chartShowV" type="checkbox" />
              <span data-i18n="opt_chart_u">Speed u(t)</span>
            </label>
            <label>
              <input id="chartShowL" type="checkbox" />
              <span data-i18n="opt_chart_L">Brightness L(t)</span>
            </label>
          </div>
        </div>

        <!-- ŒïŒΩŒ≠œÅŒ≥ŒµŒπŒ± E(t) -->
        <div id="cardEnergyE" class="chart-card">
          <div class="chart-title" data-i18n="chart_energy_E_title">
            Total energy E(t). Units: J/kg - h
          </div>
          <div id="energyEChart" class="chart-container"></div>
        </div>

        <!-- ŒöŒπŒΩŒ∑œÑŒπŒ∫ŒÆ ŒµŒΩŒ≠œÅŒ≥ŒµŒπŒ± K(t) -->
        <div id="cardEnergyK" class="chart-card" style="display: none">
          <div class="chart-title" data-i18n="chart_energy_K_title">
            Kinetic energy K(t). Units: J/kg - h
          </div>
          <div id="energyKChart" class="chart-container"></div>
        </div>

        <!-- ŒîœÖŒΩŒ±ŒºŒπŒ∫ŒÆ ŒµŒΩŒ≠œÅŒ≥ŒµŒπŒ± U(t) -->
        <div id="cardEnergyU" class="chart-card" style="display: none">
          <div class="chart-title" data-i18n="chart_energy_U_title">
            Potential energy U(t). Units: J/kg - h
          </div>
          <div id="energyUChart" class="chart-container"></div>
        </div>

        <!-- ŒëœÄœåœÉœÑŒ±œÉŒ∑ r(t) -->
        <div id="cardRadius" class="chart-card" style="display: none">
          <div class="chart-title" data-i18n="chart_radius_title">
            Distance r(t). Units: m - h
          </div>
          <div id="radiusChart" class="chart-container"></div>
        </div>

        <!-- Œ§Œ±œáœçœÑŒ∑œÑŒ± u(t) -->
        <div id="cardVelocity" class="chart-card" style="display: none">
          <div class="chart-title" data-i18n="chart_velocity_title">
            Speed u(t). Units: m/s - h
          </div>
          <div id="velocityChart" class="chart-container"></div>
        </div>

        <!-- Œ¶œâœÑŒµŒπŒΩœåœÑŒ∑œÑŒ± L(t) -->
        <div id="cardBrightness" class="chart-card" style="display: none">
          <div class="chart-title" data-i18n="chart_brightness_title">
            Brightness L(t). Units: relative - h
          </div>
          <div id="brightnessChart" class="chart-container"></div>
        </div>
      </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="scripts/i18n.js"></script>
    <script type="module" src="scripts/main.js"></script>
  </body>
</html>
